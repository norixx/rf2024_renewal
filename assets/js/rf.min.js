!function(){"use strict";var e,t,o,s,i={exports:{}},a=i.exports;
/*!
   * Toastify js 1.12.0
   * https://github.com/apvarun/toastify-js
   * @license MIT licensed
   *
   * Copyright (C) 2018 Varun A P
   */e||(e=1,o=a,s=function(e){var t=function(e){return new t.lib.init(e)};function o(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function s(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:"1.12.0",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var s=document.createElement("img");s.src=this.options.avatar,s.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(s):e.insertAdjacentElement("afterbegin",s)}if(!0===this.options.close){var i=document.createElement("button");i.type="button",i.setAttribute("aria-label","Close"),i.className="toast-close",i.innerHTML="&#10006;",i.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var a=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&a>360?e.insertAdjacentElement("afterbegin",i):e.appendChild(i)}if(this.options.stopOnFocus&&this.options.duration>0){var n=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){n.removeElement(e)}),n.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var l=o("x",this.options),r=o("y",this.options),d="left"==this.options.position?l:"-"+l,c="toastify-top"==this.options.gravity?r:"-"+r;e.style.transform="translate("+d+","+c+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var o=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,o),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},o={top:15,bottom:15},i={top:15,bottom:15},a=document.getElementsByClassName("toastify"),n=0;n<a.length;n++){e=!0===s(a[n],"toastify-top")?"toastify-top":"toastify-bottom";var l=a[n].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(a[n].style[e]=i[e]+"px",i[e]+=l+15):!0===s(a[n],"toastify-left")?(a[n].style[e]=t[e]+"px",t[e]+=l+15):(a[n].style[e]=o[e]+"px",o[e]+=l+15)}return this},t.lib.init.prototype=t.lib,t},(t=i).exports?t.exports=s():o.Toastify=s()),i.exports,window.RF_GLOBALS={},window.RF_GLOBALS.RF_CONFIG={window_state:"PC",breakpoint:768};const n=e=>{window.RF_GLOBALS.RF_CONFIG={...window.RF_GLOBALS.RF_CONFIG,...e}},l=e=>RF_GLOBALS.RF_CONFIG[e];class r{#e={target:document.body,msg:"Loading...",size:"md",style:"--bg-black",loaderClass:"c-loader",loader:null};constructor(e=null){this.#e={...this.#e,...e},console.log(this.#e),this.#t()}#o(e){console.log("ローダーを挿入"),"string"==typeof e?this.#e.target.insertAdjacentHTML("beforeend",e):"object"==typeof e&&this.#e.target.insertAdjacentElement("beforeend",e),this.#e.loader||(this.#e.loader=this.#e.target.querySelector("."+this.#e.loaderClass))}removeLoader(){console.log("ローダーを削除"),this.#e.loader.remove()}reinsertLoader(){console.log("ローダーを再挿入"),this.#o(this.#e.loader)}#s(){console.log("ローダーを作成");let e="";"md"!==this.#e.size&&(e=`--${this.#e.size}`);const t=`<div class="${this.#e.loaderClass} ${this.#e.style} ${e}"></div>`;this.#o(t)}#t(){this.#s()}}class d{#i;#a;#n={status:null,elements:null};#l;#r={get(e,t){console.log("target&key: ",e,t);const o=Array.prototype.slice.call(e.elements).some((e=>e.checked));return console.log(e.elements),console.log(o),e[t]=o,e[t]}};constructor(e,t){if(!e||!t)throw new Error("No Form selected!");console.log("yes checkboxes!"),this.#i=e,this.#a=t,this.#n.elements=this.#a,this.#l=new Proxy(this.#n,this.#r)}getStatus(){return this.#l.status}}class c{#i;#d=[];#c=[];constructor(e){this.#i=e,this.#d=Array.from(this.#i.querySelectorAll("[data-js-checkboox-combo-group]")),this.#d.forEach((e=>{this.#c.push({parent:e.querySelector("[data-js-checkbox-combo-parent]"),elements:Array.from(e.querySelectorAll("[data-js-checkbox-combo-target]"))})})),this.#t()}getCheckedStatus=()=>this.#i.querySelectorAll('input[type="checkbox"][data-js-checkbox-combo-target]:checked').length>0;setParentCheckbox=()=>{this.#c.forEach((e=>{const t=e.parent,o=e.elements;t.addEventListener("change",(()=>{console.log(o),o.forEach((e=>{e.checked=t.checked}))}))}))};setChildCheckbox=()=>{this.#c.forEach((e=>{const t=e.parent,o=e.elements;o.forEach((e=>{e.addEventListener("change",(()=>{const s=o.every((e=>e.checked)),i=o.some((e=>e.checked));console.log(e,s,i),s?(t.checked=!0,t.indeterminate=!1):i?(t.checked=!1,t.indeterminate=!0):(t.checked=!1,t.indeterminate=!1)}))}))}))};#t=()=>{this.setParentCheckbox(),this.setChildCheckbox()}}class h{#h="--is-modal-open";#m="--is-open";#p=document.documentElement;#u;#g;#f;#b="jsModalTarget";#w=[];#S={};constructor(e=null){e?this.modal(e):(this.#u=Array.from(document.querySelectorAll("[data-js-modal-target]")),this.#g=Array.from(document.querySelectorAll("[data-js-modal]")),this.#f=Array.from(document.querySelectorAll("[data-js-ajax-modal]")),this.#y(),this.#L())}on(e,t){this.#S[e]||(this.#S[e]=[]),this.#S[e].push(t)}async#v(e,t=null){if(this.#S[e]){const o=this.#S[e].map((e=>Promise.resolve(e(t))));return Promise.all(o)}}openModal(e){const t=document.querySelector(e);console.dir(t),t.classList.add(this.#m),this.#p.classList.add(this.#h),this.#w.push(e),console.log("opened modals",this.#w)}#k(e){(e instanceof Element?[e]:Array.from(e)).forEach((e=>{const t=e.dataset.jsModal;e.addEventListener("click",(o=>{"A"!==e.tagName&&"BUTTON"!==e.tagName||o.preventDefault(),this.openModal(t)}))}))}#y(){this.#g.forEach((e=>{this.#k(e)}))}async closeModal(e){await this.#v("beforeClose",e);const t=this.#w.indexOf(e);this.#w.splice(t,1),console.log("閉じる対象のモーダル: ",e),e.classList.remove(this.#m),0===this.#w.length&&this.#p.classList.remove(this.#h),console.log("closing...opened modals",this.#w)}#E(e){e.addEventListener("click",(t=>{console.log("モーダル本体クリック",this.#b,t.target.dataset),this.#b in t.target.dataset&&(console.log("モーダルターゲット(本体)クリックで閉じる",e),this.closeModal(e))}));e.querySelectorAll("[data-js-modal-close]").forEach((t=>{t.addEventListener("click",(()=>{console.log("モーダル閉じるボタンクリック",e),this.closeModal(e)}))}))}#L(){this.#u.forEach((e=>{this.#E(e)}))}setModalOpenBtn(e){this.#k(e)}setModal(e){this.#E(e)}modal(e){"modalOpenBtn"in e&&(console.log("モーダル開くボタンセット"),this.setModalOpenBtn(e.modalOpenBtn)),"modal"in e&&(console.log("モーダルセット"),this.setModal(e.modal))}}const m=()=>{let e=null,t=null;const o=document.querySelectorAll("[data-js-madori-modal]"),s="madori-modal",i="madori-container";RF_GLOBALS.hasOwnProperty("rf_modals")?console.log("rf_modalsはすでに存在しています"):(console.log("rf_modals not exists"),RF_GLOBALS.rf_modals=new RF_GLOBALS.RfModals);o.length>0&&o.forEach((o=>{o.addEventListener("click",(async()=>{document.querySelector(".c-buildroom-modal.--madori-modal")||(console.log("間取りモーダルが無いので作成します"),(()=>{const o=`\n      <div class="c-buildroom-modal --madori-modal c-modal" id="${s}" data-js-modal-target>\n        <button type="button" data-js-buildroom-modal-close data-js-modal-close class="c-buildroom-modal__close"><span class="u-visually-hidden">閉じる</span></button>\n        <div class="c-buildroom-modal__container" id="${i}"></div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",o),e=document.querySelector("#"+s),t=e.querySelector("#"+i),RF_GLOBALS.rf_modals.on("beforeClose",(e=>{e.id===s&&(console.log("間取りモーダル閉じるイベント"),e.querySelector("#"+i).innerHTML="")})),RF_GLOBALS.rf_modals.modal({modal:e})})()),t.innerHTML="",RF_GLOBALS.rf_modals.openModal("#"+s);const a=new RF_GLOBALS.RfLoader({target:document.querySelector("#"+i),size:"sm"}),n=o.dataset.jsMadoriPhoto;if(n)try{const e=await(l=n,new Promise(((e,t)=>{const o=new Image;o.onload=()=>{e(o)},o.onerror=()=>{console.log("間取り画像の読み込みに失敗しました"),o.src="/assets/img/common/nophoto.webp",e(o)},o.src=l})));a.removeLoader(),t.innerHTML="",t.appendChild(e)}catch(e){console.error("画像の読み込みエラー:",e),t.innerHTML="",a.removeLoader()}var l}))}))},p=()=>{const e=document.querySelectorAll("[data-js-toggle]"),t="data-js-toggle",o="data-js-toggle-text",s=document.documentElement,i="--is-open";(()=>{s.addEventListener("click",(e=>{const s=e.target;let a;if(console.dir(s),s.hasAttribute(t))a=s;else{if(!s.closest(`[${t}]`))return;a=s.closest(`[${t}]`)}console.log("toggle: ",a),console.log("現在のモード: ",l("window_state")),a.classList.contains("toggle-sp-only")&&"SP"!==l("window_state")||a.classList.contains("toggle-pc-only")&&"PC"!==l("window_state")||(e=>{const t=document.querySelector(e.dataset.jsToggle);if(e.classList.toggle(i),e.setAttribute("aria-expanded",e.classList.contains(i)),t&&(console.log("トグルターゲットのクラスを切り替えます"),console.log("toggle target: ",t),t.classList.toggle(i),t.setAttribute("aria-hidden",!e.classList.contains(i))),!e.hasAttribute(o))return;let s=e.getAttribute(o);e.setAttribute(o,e.textContent),e.textContent=s})(a)}))})(),e.forEach((e=>{(e=>{const t=document.querySelector(e.dataset.jsToggle);if(e.classList.contains(i)&&!t.classList.contains(i)&&(t.classList.add(i),e.setAttribute(o,e.textContent),e.textContent=s),!e.hasAttribute(o))return;let s;s=e.dataset.jsToggleText})(e)}))},u=()=>{const e={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{0:{slidesPerView:1.3,spaceBetween:16,slidesOffsetAfter:16,slidesOffsetBefore:16},768:{slidesPerView:4.3,spaceBetween:24,slidesOffsetAfter:24,slidesOffsetBefore:24}}};new Swiper("[data-js-top-banners]",e)},g=()=>{const e=document.querySelector("[data-js-today-target]"),t=e.querySelectorAll("[data-js-today]"),o=async()=>{try{const e=await fetch("/rf/today");if(!e.ok||404===e.status)throw new Error("fetch error");(e=>{const o=(new DOMParser).parseFromString(e,"text/html"),s=JSON.parse(o.querySelector("#todays-data").textContent);console.log(s),t.forEach((e=>{console.log(e),e.textContent=s[e.dataset.jsToday]}))})(await e.text())}catch(t){(t=>{console.error(t),e.insertAdjacentHTML("beforeend",'<p class="u-color-alert u-fz-14 u-ta-center">件数取得エラーが発生しました</p>')})(t)}};(async()=>{o()})()},f=()=>{const e=document.querySelectorAll("[data-js-prop-slider]");let t={};const o={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".c-prop-slider__pagination",type:"progressbar"},breakpoints:{0:{spaceBetween:16,slidesPerView:1.2,slidesOffsetBefore:32,slidesOffsetAfter:32},768:{spaceBetween:24,slidesPerView:4.4,slidesOffsetBefore:40,slidesOffsetAfter:40}}};e.forEach((e=>{const s=new Swiper(e,o);t[e.id]=s}))};class b{#_={mainSlide:null,thumbSlide:null,modalMainSlide:null,modalThumbSlide:null};#T=null;#M={build:[],floorplan:[],exterior:[],panorama:[]};#j={build:[],exterior:[],floorplan:[],panorama:[]};#A={ja:{build:"建物",exterior:"外観・共用部・周辺",floorplan:"間取り・部屋",panorama:"パノラマ・動画"},en:{build:"Building",exterior:"Exterior, common spaces, and surroundings",floorplan:"Floor plan &amp; Room",panorama:"Panoramas and videos"}};#O=null;#x=!0;#C={build:!0,floorplan:!0,exterior:!0,panorama:!0};#q={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"fraction"},zoom:!0};#R={slidesPerView:4.5,freeMode:!0,spaceBetween:8,breakpoints:{0:{slidesPerView:4.5},768:{slidesPerView:8.5}}};#P={slidesPerView:4.5,freeMode:!0,spaceBetween:8,breakpoints:{0:{slidesPerView:4.5},768:{slidesPerView:12.5}},zoom:!0};#F={ja:{nodata:"データを取得できません"},en:{nodata:"Failed to get data"}};#B=document.querySelector("[data-js-buildroom-slide]");#N=this.#B.querySelector("[data-js-buildroom-slide-container]");#H=this.#B.querySelector(".swiper");#G=this.#H.querySelector(".swiper-wrapper");#D=this.#B.querySelector("[data-js-buildroom-slide-thumbs-container]");#W=this.#B.querySelector("[data-js-buildroom-slide-thumbs]");#$=this.#W.querySelector(".swiper-wrapper");#I=document.querySelector("[data-js-buildroom-modal]");#V=this.#I.querySelector(".swiper");#z=this.#V.querySelector(".swiper-wrapper");#U=this.#I.querySelector("[data-js-buildroom-modal-thumbs]");#J=this.#U.querySelector(".swiper-wrapper");#Q='<button class="c-buildroom-slide__btn-open --modal --is-hidden" data-js-buildroom-modal-open data-js-modal type="button">\n    <span class="u-visually-hidden">拡大</span>\n    </button>';#K=null;#Y='<button class="c-buildroom-slide__btn-open --panorama --is-hidden" data-js-buildroom-panorama-open type="button">';#X=null;#Z=document.querySelector("[data-js-buildroom-slide-tab-container]");#ee=null;constructor(){this.#t()}#te(){for(;this.#G.firstChild;)this.#G.removeChild(this.#G.firstChild);const e=`<div class="swiper-slide"><img src="${RF_gallery_nophoto}" alt="No photo" class="c-buildroom-slide__nodata"></div>`;this.#G.insertAdjacentHTML("beforeend",e),this.#B.classList.add("--is-slide-disabled")}#oe(e){RF_lang;return`<p class="c-buildroom-slide__error">${this.#F[RF_lang][e]}</p>`}#se(e){"nodata"===e&&(this.#oe(e),this.#te())}#ie(){this.#N.classList.remove("--is-loading")}#ae(e){this.#O=e}#ne(){return this.#O}#le(e){return this.#M[e]}#re(e,t){this.#M[e]=t}#de(e){return this.#j[e]}#ce(e,t){this.#j[e]=t,console.log("スライドHTML: ",this.#j)}#he(){console.log("サムネイルコンテナを表示します。"),this.#D.classList.remove("--is-hidden")}#me(){console.log("間取り画像がありません。モーダル、タブボタンを非表示にします。"),this.#pe(!1),this.#_.mainSlide.disable(),this.#_.thumbSlide.disable(),this.#D.classList.add("--is-hidden")}#ue(){console.log("サムネイルコンテナを表示します。"),this.#D.classList.remove("--is-hidden")}#ge(){console.log("画像がありません。ボタン系を非表示にします。"),this.#pe(!1),this.#_.mainSlide.disable(),this.#_.thumbSlide.disable(),this.#D.classList.add("--is-hidden")}#fe(){this.#_.mainSlide.removeAllSlides(),this.#_.thumbSlide.removeAllSlides(),this.#_.modalMainSlide.removeAllSlides(),this.#_.modalThumbSlide.removeAllSlides()}#pe(e=!1,t=!1){const o="--is-hidden";e?(console.log("モーダルかパノラマオープンボタンを表示します"),t?(console.log("パノラマオープンボタン表示"),this.#K.classList.add(o),this.#X.classList.remove(o)):(console.log("モーダルオープンボタン表示"),this.#K.classList.remove(o),this.#M.panorama.length>0&&this.#X.classList.add(o))):(console.log("モーダル、パノラマオープンボタンを非表示にします"),this.#K.classList.add(o),this.#M.panorama.length>0&&this.#X.classList.add(o))}#be(e){console.log("モーダルスライドを追加 key: ",this.#ne());const t=this.#ne();this.#_.modalMainSlide.removeAllSlides(),this.#_.modalThumbSlide.removeAllSlides();const o=this.#de(t);this.#_.modalMainSlide.appendSlide(o),this.#_.modalThumbSlide.appendSlide(o),this.#_.modalThumbSlide.update(),this.#_.modalMainSlide.update(),this.#_.modalMainSlide.slideTo(e),this.#_.modalThumbSlide.slideTo(e)}#we(e){console.log("Swiperにスライド追加！"),this.#fe();const t=this.#de(e);this.#_.thumbSlide.appendSlide(t),this.#_.thumbSlide.update(),this.#_.thumbSlide.slideTo(0),this.#_.mainSlide.appendSlide(t),this.#_.mainSlide.update(),this.#_.mainSlide.slideTo(0),console.log("setSwiper",this.#C[e]),this.#C[e]&&(this.#_.mainSlide.enable(),this.#_.thumbSlide.enable(),this.#he(),this.#pe(!0,"panorama"===e)),this.#ae(e)}#Se(e,t=!1){let o=[];return e.forEach((e=>{let s="";t&&(s=`data-js-buildroom-panorama="${e.url}"`);const i="build"===RF_page_key?RF_gallery_nophoto:RF_gallery_nofloorplan;o.push(`<div class="swiper-slide" ${s}>\n          <div class="swiper-zoom-container">\n            <img src="${t?e.filename:e}" alt="" class="" loading="lazy" onerror="this.onerror='';this.src='${i}'">\n          </div>\n        </div>`)})),o}async#ye(e){await e.decode(),console.log(`width: ${e.width}, height: ${e.height}`)}async#Le(e,t=!1){let o=0,s=0,i=0;i=e.length>3?3:e.length;console.log("チェックする画像の枚数",i);let a=new Promise(((a,n)=>{e.forEach((async e=>{console.log(e);const l=new Image;l.src=t?e.filename:e;try{o++,console.log("画像カウンター: ",o),await this.#ye(l),o>=i&&a(!0)}catch(e){console.log(e),s++,s>=i&&n(!0),o>=i&&(console.log("エラーありでcounter終了"),a(!0))}})),setTimeout((()=>{n(!1)}),3e4)}));return await a}async#ve(e){let t=null;const o=this.#le(e);try{const s=await this.#Le(o,"panorama"===e);console.log("loaded: ",s),console.log(o),t=this.#Se(o,"panorama"===e)}catch(o){if(console.log("初期写真の取得に失敗"),console.error(o),o){console.log("写真取得に失敗。no photoに差し替えます"),this.#M[e]=[{filename:RF_gallery_nophoto}];const o=this.#le(e);t=this.#Se(o),this.#C[e]=!1}}finally{const o=this.#M[e][0].substring(this.#M[e][0].lastIndexOf("/")+1),s=RF_gallery_nophoto.substring(RF_gallery_nophoto.lastIndexOf("/")+1);1===this.#M[e].length&&o===s&&(console.log("no photoのみです"),this.#C[e]=!1),console.log("スライドHTMLデータをセットします: ",t),this.#ce(e,t)}}#ke(){const e=this.#H.querySelector(".swiper-slide-active").dataset.jsBuildroomPanorama;console.log(e),window.open(e,"","width=800,height=600,left=0,top=0,menubar=no,status=no")}#Ee(){console.log("パノラマオープンボタンの追加"),this.#N.insertAdjacentHTML("beforeend",this.#Y),this.#X=this.#N.querySelector("[data-js-buildroom-panorama-open]"),this.#X.addEventListener("click",(()=>{this.#ke()}))}#_e(){this.#N.insertAdjacentHTML("beforeend",this.#Q),this.#K=this.#N.querySelector("[data-js-buildroom-modal-open]"),this.#K.dataset.jsModal="#"+this.#I.id}#Te(){this.#ee.forEach((e=>{let t=!1;e.addEventListener("click",(async e=>{const o=e.target.dataset.jsBuildroomSlideTab;if(t)console.log("ロード中なのでストップ");else{if(t=!0,console.log("タブイベント",o,this.#x),this.#ne()===o)return console.log("同じボタンなのでストップ"),void(t=!1);if(this.#pe(!1),this.#_.mainSlide.disable(),this.#_.thumbSlide.disable(),this.#ee.forEach((e=>{e.classList.remove("--is-active")})),"BUTTON"===e.target.tagName&&e.target.classList.add("--is-active"),this.#de(o).length)console.log("データからロード"),this.#we(o),this.#C[o]||this.#ge(),t=!1;else{console.log("未HTML化なのでHTML化してロード"),this.#T.reinsertLoader();const e=this.#le(o),s=this.#Se(e,"panorama"===o);this.#ce(o,s);try{await this.#Le(e,"panorama"===o)}catch(e){console.log("ロードに失敗しました"),console.log(e)}finally{console.log("ロードされました"),this.#T.removeLoader(),this.#ie(),this.#we(o),this.#C[o]||this.#ge(),t=!1}}}}))}))}#Me(e){let t=RF_lang;return`<button type="button" data-js-buildroom-slide-tab="${e}" type="button">${this.#A[t][e]}</button>`}#je(){let e="";for(let t in this.#M)("build"!==RF_page_key||"build"!==t&&"exterior"!==t&&"panorama"!==t)&&("room"!==RF_page_key||"room"!==t&&"exterior"!==t&&"floorplan"!==t&&"panorama"!==t)||this.#M[t].length>0&&(e+=this.#Me(t));this.#Z.insertAdjacentHTML("beforeend",e),this.#ee=Array.from(this.#Z.querySelectorAll("[data-js-buildroom-slide-tab]"));const t=this.#ne();console.log("タブ用のkey: ",t);this.#ee.filter((e=>e.dataset.jsBuildroomSlideTab===t))[0].classList.add("--is-active"),this.#Te()}#Ae(){this.#K.addEventListener("click",(()=>{console.log("モーダルアクティブインデックスを更新、モーダルスライドを追加"),this.#be(this.#_.mainSlide.activeIndex)}))}#Oe(){this.#_e(),this.#M.panorama.length>0&&this.#Ee();const e=this.#ne();this.#pe(!0,"panorama"===e);const t={modal:this.#I,modalOpenBtn:this.#K};RF_GLOBALS.rf_modals?(console.log("モーダル作成: すでにモーダルインスタンスがあります。"),RF_GLOBALS.rf_modals.modal(t)):(console.log("モーダル作成: モーダルインスタンスはありません。作成します"),RF_GLOBALS.rf_modals=new RF_GLOBALS.RfModals(t)),this.#Ae()}#xe(){console.log("Swiper初期化"),this.#_.thumbSlide=new Swiper(this.#W,this.#R);let e={...this.#q,thumbs:{swiper:this.#_.thumbSlide}};this.#_.mainSlide=new Swiper(this.#H,e),this.#_.modalThumbSlide=new Swiper(this.#U,this.#P);let t={...this.#q,thumbs:{swiper:this.#_.modalThumbSlide}};this.#_.modalMainSlide=new Swiper(this.#V,t),this.#_.modalThumbSlide.controller.control=[this.#_.thumbSlide],this.#_.thumbSlide.controller.control=[this.#_.modalThumbSlide],this.#_.mainSlide.controller.control=[this.#_.modalMainSlide],this.#_.modalMainSlide.controller.control=[this.#_.mainSlide]}#Ce(e){let t="";this.#de(e).forEach((e=>{t+=e})),console.log("初期スライドHTML",t),this.#G.insertAdjacentHTML("beforeend",t),this.#$.insertAdjacentHTML("beforeend",t)}async#qe(){let e="";for("build"===RF_page_key?e=Object.keys(this.#M).find((e=>"floorplan"!==e&&"room"!==e&&(this.#M[e].length>0||void 0))):"room"===RF_page_key&&(e="floorplan"),console.log("firstKey: ",e),this.#ae(e),await this.#ve(e);this.#G.firstChild;)this.#G.removeChild(this.#G.firstChild);this.#Ce(e),this.#xe(),this.#Oe(),this.#je();const t=this.#ne();this.#C[t]||this.#ge(),this.#T.removeLoader(),this.#ie()}#Re(e,t){switch(t){case"001":this.#M.build.push(e);break;case"101":this.#M.floorplan.push(e)}}#Pe(e){e.forEach((e=>{switch(e.part){case"001":case"002":case"003":case"004":case"005":case"031":case"032":case"033":case"034":case"035":case"036":case"037":case"038":case"039":this.#M.exterior.push(e.filename)}})),console.log("部屋ページ: 建物写真が存在し、挿入後のフォトデータ",this.#M)}#Fe(e){e.forEach((e=>{switch(e.part){case"002":case"003":case"004":case"005":this.#M.build.push(e.filename);break;case"031":case"032":case"033":case"034":case"035":case"036":case"037":case"038":case"039":this.#M.exterior.push(e.filename);break;case"102":case"103":case"104":case"105":case"106":case"108":case"109":case"110":case"111":case"131":case"132":case"133":case"135":case"136":this.#M.floorplan.push(e.filename)}})),console.log("間取り写真枚数",this.#M.floorplan.length),console.log("ソート後の写真データ(this.#photos)",this.#M)}#Be(){"undefined"!=typeof RF_gallery_panorama&&RF_gallery_panorama.forEach((e=>{this.#M.panorama.push({filename:e.filename,url:e.url})}))}async#Ne(){this.#T=new RF_GLOBALS.RfLoader({target:this.#G}),this.#Be();let e=!1,t=new Image;try{"build"===RF_page_key?t.src=RF_firstbuild_photo:"room"===RF_page_key&&(t.src=RF_firstfloorplan_photo),console.log("初期画像",t),await this.#ye(t),e=!0}catch(e){console.log("初期画像ロードエラー: ",e),"build"===RF_page_key?t.src=RF_gallery_nophoto:"room"===RF_page_key&&(t.src=RF_gallery_nofloorplan)}finally{let e;console.log("ロードチェック後の初期画像",t),"build"===RF_page_key?e="001":"room"===RF_page_key&&(e="101"),this.#Re(t.src,e)}console.log("初期画像処理後の写真データ(this.#photos)",this.#M);try{const t=await fetch(RF_gallery_url),o=await t.json();console.log("取得した"+RF_page_key+"データ(JSON): ",o);let s=[];if("room"===RF_page_key){console.log("部屋ページなので、外観写真も取得");let e=await fetch(RF_gellery_tatemono_url);s=await e.json(),console.log("【部屋】取得したデータ(外観)(JSON): ",s)}if("build"===RF_page_key&&!e&&!o.length&&"undefined"==typeof RF_firstbuild_photo)throw"No data";if("room"===RF_page_key&&!e&&!o.length&&!s.length&&"undefined"==typeof RF_firstbuild_photo)throw"No data";this.#Fe(o),"room"===RF_page_key&&s.length>0&&this.#Pe(s),this.#qe()}catch(e){console.dir(e),this.#se("nodata"),this.#T.removeLoader(),this.#ie()}}async#t(){try{this.#Ne()}catch(e){}}}const w=()=>{const e=document.querySelectorAll("[data-js-related-prop-slider]"),t=[],o={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".c-prop-slider__pagination",type:"progressbar"},init:!1,breakpoints:{0:{spaceBetween:16,slidesPerView:1.4,slidesOffsetBefore:32,slidesOffsetAfter:32},768:{spaceBetween:24,slidesPerView:3.5,slidesOffsetBefore:40,slidesOffsetAfter:40}}},s=()=>{t.forEach((e=>{e.on("init",(()=>{const t=e.el.querySelector(".c-prop-slider__loader");t&&t.remove()})),e.init()}))};e.forEach((e=>{const s=new Swiper(e,o);console.dir(s),t.push(s)})),s()},S=()=>{const e="jsWardSelect";document.querySelector("#sys-form");const t=Array.from(document.querySelectorAll("[data-js-ward-select]")),o=t.filter((e=>"INPUT"===e.tagName)),s=t.filter((e=>"g"===e.tagName));let i=[],a=[];const n=()=>a,l=()=>i,r=()=>{t.forEach((t=>{t.addEventListener("click",(()=>{let r=!0;var d;d=n(),i=[...d],console.log("前の区",i);const c=t.dataset.jsWardSelect;n().includes(c)?(console.log("削除"),r=!1,(e=>{const t=a.indexOf(e);a.splice(t,1),console.log("削除後",a)})(c)):(console.log("追加"),(e=>{a.push(e)})(c)),console.log("現在",a),console.log("１個前",i),((t,i)=>{let a=null;a=t?n().filter((e=>!l().includes(e))):l().filter((e=>!n().includes(e))),console.log("差分",a);const r="INPUT"===i.tagName;console.log("checkbox?",r),a.forEach((i=>{console.log("差分",i);const[a]=s.filter((t=>t.dataset[e]===i)),[n]=o.filter((t=>t.dataset[e]===i));console.log("選択された",a,n),a.classList.toggle("--is-active",t),n.checked=t}))})(r,t)}))}))};t.forEach((e=>{console.dir(e),"INPUT"===e.tagName&&(console.log(e.checked),console.log(e.defaultChecked),e.setAttribute("autocomplete","off"),e.checked=!1)})),r()},y=()=>{const e=document.querySelectorAll("[data-js-result-room-slide]"),t="--is-disabled",o="c-result-room__flash-msg";let s={};const i=["102","103","104","105"],a={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},n="これ以上画像はありません",l="データ取得エラー",r=(e,t)=>{let s="";if("no_img"===e)s=n,t.classList.add("--is-no-slide");else s=l;((e,t)=>{if(t.querySelector(`.${o}`))return void console.log("Traffic jam right now!!!");const s=`<p class="${o}">${e}</p>`;t.insertAdjacentHTML("beforeend",s);const i=t.querySelector(`.${o}`);console.log(i),i.addEventListener("transitionend",(()=>{i.remove()})),setTimeout((()=>{i.classList.add("--is-deactive")}),3e3)})(s,t)},d=async e=>{try{const t=await fetch(e);if(!t.ok)throw new Error("fetch_err");const o=await t.json();console.log(o);const s=(e=>e.filter((e=>i.includes(e.part))))(o);if(console.log(s),s.length>1)return s;throw new Error("no_img")}catch(e){return console.dir(e),e.message}};async function c(e,o){const[i]=e,n=i.dataset.jsResultRoomSlide,l=i.closest("[data-js-result-room-parent]");if(i.classList.contains(t))return!1;const c=new RF_GLOBALS.RfLoader({target:l});i.classList.add(t);try{const e=await d(n);if(console.log(e),"object"!=typeof e||!JSON.parse(JSON.stringify(e)))throw new Error(e);{const t=i.closest(".swiper"),o=i.dataset.jsResultRoomId;i.removeEventListener("click",s[o]),delete s[o],((e,t)=>{let o="";e.forEach((e=>{o+=`<div class="c-result-room__slide-item swiper-slide">\n      <img src="${e.filename}" alt="${e.name}" loading="lazy" onerror="this.onerror='';this.src='${RF_gallery_nophoto}'">\n      </div>`})),t.querySelector(".swiper-wrapper").insertAdjacentHTML("beforeend",o),new Swiper(t,a).slideTo(1)})(e,t)}}catch(e){r(e.message,l)}i.classList.remove(t),c.removeLoader()}(()=>{e.forEach((e=>{e.addEventListener("click",(()=>{(e=>{const t=e.dataset.jsResultRoomId;s[t]=c.bind(null,[e]),console.log(s),e.addEventListener("click",s[t]),e.click()})(e)}),{once:!0})}))})()},L=()=>{const e=document.querySelectorAll("[data-js-form-checkbox]"),t="form-ensen-step1",o=[t];let s=[];function i(){console.log(this);const e=this.checker.getStatus();if(this.formId===t){((e,t)=>{const o=!t;e.classList.toggle("--is-disabled",o),o?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")})(document.querySelector("#form-ensen-submit"),e)}}const a=()=>{0!==s.length&&s.forEach((e=>{const t=i.bind(e);e.elements.forEach((e=>{e.addEventListener("change",t)})),e.elements[0].dispatchEvent(new Event("change"))}))};(e=>{e.forEach((e=>{const t=e.id;let i;try{if(!t)throw new Error("Please provide form id");if(!o.includes(t))throw new Error("This form is not set for checkbox checks");if(i=e.querySelectorAll("input[type=checkbox][data-js-checkbox-target]"),0===i.length)throw new Error("Target checkbox does not exist.")}catch(e){return void console.log(e.message)}s.push({formId:t,checker:new RF_GLOBALS.RfCheckboxStatus(e,i),elements:i})})),a()})(e)},v=()=>{const e=document.querySelectorAll("[data-js-form-search-area-checkbox]"),t=["sys-form"];e.forEach((e=>{const o=e.id;let s;try{if(!o)throw new Error("Please provide form id");if(!t.includes(o))throw new Error("This form is not set for checkbox checks");if(s=e.querySelectorAll("input[type=checkbox][data-js-checkbox-combo-target]"),0===s.length)throw new Error("Target checkbox does not exist.")}catch(e){return void console.log(e.message)}new RF_GLOBALS.RfCheckBoxCombo(e)}))};class k{#He;#Ge;#De=768;#We=matchMedia(`(min-width: ${this.#De}px)`);constructor(e,t,o=this.#De){this.#He=e,this.#Ge=t,this.#De=o,this.#We=matchMedia(`(min-width: ${o}px)`),this.#$e()}#$e(){console.log("media query function: ",this.#He),this.#We.addEventListener(this.#Ge,this.#He),this.#We.dispatchEvent(new Event(this.#Ge))}}const E=()=>{const e=document.querySelector("[data-js-search-change-method]");let t;const o={content:e=>{const t=e.dataset.jsSearchMethod;return document.querySelector(t),document.querySelector(t)},animation:"shift-away",interactive:!0,
interactiveBorder:10,trigger:"click",delay:[null,300],arrow:tippy.roundArrow,theme:"rf"},s={placement:"bottom"},i={placement:"right"},a=e=>{console.log("media event",e);const o=e.matches||e.currentTarget.matches;let a;console.log("is_matched: ",o),o?(console.log("tippy PC"),a={...i}):(console.log("tippy SP"),a={...s}),t.setProps(a)};(()=>{let a;console.log("tippy init"),"PC"===RF_GLOBALS.RF_CONFIG.window_state?a={...o,...i}:"SP"===RF_GLOBALS.RF_CONFIG.window_state&&(a={...o,...s}),console.log("tippy setting: ",a),t=tippy(e,a)})(),new RF_GLOBALS.RfMediaQuery(a,"change")},_=()=>{document.querySelector("#ajax-modal-test").addEventListener("click",(async e=>{if(e.preventDefault(),e.target.classList.contains("--is-loading"))return;e.target.classList.add("--is-loading");const t=new RF_GLOBALS.RfLoader({style:"--bg-black --fixed-center"}),o=await new Promise(((e,t)=>{setTimeout((()=>{e("wait")}),2e3)}));console.log(o),t.removeLoader(),e.target.classList.remove("--is-loading"),RF_GLOBALS.rf_modals.openModal("#sys-dialog-area")}))};(()=>{let e;window.addEventListener("resize",(()=>{requestAnimationFrame((()=>{let e=l("window_state");window.innerWidth<l("breakpoint")&&"PC"===e?(n({window_state:"SP"}),console.log("set to SP")):window.innerWidth>=l("breakpoint")&&"SP"===e&&(n({window_state:"PC"}),console.log("set to PC"))}))})),window.dispatchEvent(new Event("resize")),window.RF_GLOBALS={...window.RF_GLOBALS,RfLoader:r,RfCheckboxStatus:d,RfCheckBoxCombo:c,RfMediaQuery:k,RfModals:h,rf_modal_madori:m},console.log(window.RF_GLOBALS),document.querySelector("[data-js-gnav]")&&(()=>{let e=!1,t=!1,o=null,s=null;const i="gnav-main",a="--is-open",n="jsGnavLv1",r=document.querySelector(`#${i}`),d=document.querySelector("#gnav-btn-open"),c=document.querySelector("[data-js-gnav-close]"),h=document.querySelector("#gnav-sub-container"),m=document.querySelector("[data-js-gnav-sub-container-close]"),p=document.querySelectorAll("[data-js-gnav-sub]"),u=Array.from(p).map((e=>document.querySelector(e.dataset.jsGnavSub))),g=document.querySelectorAll(["[data-js-gnav-sub-close]"]),f=()=>{e=!1,r.classList.remove(a),t=!1,o=null,s=null,h.classList.remove(a),p.forEach((e=>{e.classList.remove(a)})),u.forEach((e=>{e.classList.remove(a)}))},b=()=>{e=!0,r.classList.add(a)};r.addEventListener("click",(e=>{e.target.id===i&&f()})),c.addEventListener("click",(e=>{f()})),d.addEventListener("click",(t=>{e&&r.classList.contains(a)?f():b()})),p.forEach((e=>{e.addEventListener("click",(i=>{console.log("クリック前のLv2: ",s);const r=e.dataset.jsGnavSub;if(n in e.dataset&&"PC"===l("window_state")){if(console.log("PC Lv1 クリック: ",r),t&&s===r)return console.log("PC サブコンテナ閉じる"),void f();t&&s!==r&&(console.log("PC サブコンテナ切り替え"),document.querySelector(s).classList.remove(a)),!1===t&&(b(),h.classList.add(a),t=!0)}if(s=r,console.log("クリック後のLv2: ",s),console.log(t),n in e.dataset&&!0!==t&&"SP"===l("window_state")&&(h.classList.add(a),t=!0),document.querySelector(r).classList.add(a),n in e.dataset){const t=document.querySelector(`[data-js-gnav-lv1=${o}]`);console.log("1つ前のLv1",t),t&&t.classList.remove(a),o=e.dataset[n],console.log("保存したLv1",o),e.classList.add(a)}}))})),m.addEventListener("click",(()=>{f()})),g.forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(e.dataset.jsGnavSubClose);t.classList.contains(a)&&t.classList.remove(a)}))}))})(),document.querySelector("[data-js-toggle]")&&p(),document.querySelector("[data-js-pagetop]")&&(()=>{const e=document.querySelector("[data-js-pagetop]");let t;e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}));const o=s=>{t||(t=s-100),s>=t+100&&(e.classList.toggle("--is-show",window.scrollY>=500),t=s),requestAnimationFrame(o)};requestAnimationFrame(o)})(),document.querySelector("[data-js-today-target]")&&g(),document.querySelector("[data-js-top-banners]")&&(console.log("top slider"),u()),document.querySelector("[data-js-prop-slider]")&&f(),document.querySelector("[data-js-related-prop-slider]")&&w(),document.querySelector("[data-js-room-link]")&&(document.querySelectorAll("[data-js-room-link]").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();const o=t.target;if("A"===o.tagName||"BUTTON"===o.tagName||o.hasAttribute("data-js-madori-modal")||o.closest(".swiper-initialized"))return void console.log("インタラクティブ要素or間取り画像なので中止");const s=e.dataset.jsRoomLink;window.open(s,"_blank")}))})),(()=>{const e="--is-open";let t="";const o=document.querySelectorAll("[data-js-room-toggle]");window.addEventListener("load",(()=>{o.forEach((o=>{const s=document.querySelector(o.dataset.jsRoomToggle);("PC"===l("window_state")&&s.scrollHeight<660||"SP"===l("window_state")&&s.scrollHeight<1200)&&o.classList.add("--is-hide"),o.addEventListener("click",(()=>{s.classList.toggle(e),o.classList.toggle(e),s.classList.contains(e)?s.style.maxHeight=s.scrollHeight+"px":s.style.maxHeight=null,"jsRoomToggleText"in o.dataset&&(t=o.textContent,o.textContent=o.dataset.jsRoomToggleText,o.dataset.jsRoomToggleText=t)}))}))}))})()),document.querySelector("[data-js-buildroom-slide]")&&(e=new b,console.dir(e)),(document.querySelector("[data-js-modal]")||document.querySelector("[data-js-modal-target]"))&&(RF_GLOBALS.rf_modals=new RF_GLOBALS.RfModals),document.querySelector("[data-js-cta-navi-tel]")&&(()=>{const e=document.querySelector(["[data-js-cta-navi-tel]"]),t=document.querySelector(e.dataset.jsCtaNaviTel);e.addEventListener("click",(()=>{console.log(t),t.classList.toggle("--is-open")})),console.dir(e)})(),document.querySelector("[data-js-select-link]")&&document.querySelectorAll("[data-js-select-link]").forEach((e=>{e.addEventListener("change",(e=>{const t=e.target.selectedOptions[0].value;location.href=t}))})),document.querySelector("[data-js-ward-select]")&&S(),document.querySelector("[data-js-result-room-slide]")&&y(),document.querySelector("[data-js-form-checkbox]")&&L(),document.querySelector("[data-js-form-search-area-checkbox]")&&v(),document.querySelector("[data-js-search-change-method]")&&E(),document.querySelector("#ajax-modal-test")&&_(),document.querySelector("[data-js-madori-modal]")&&m()})()}();
//# sourceMappingURL=rf.min.js.map